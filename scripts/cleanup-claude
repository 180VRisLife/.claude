#!/bin/bash
# Claude Code cache cleanup script
# Run periodically to free disk space

CLAUDE_DIR="$HOME/.claude"

echo "Cleaning Claude Code caches..."

# Delete files older than 7 days (keeps recent for debugging)
for dir in debug todos shell-snapshots plans file-history session-env; do
    find "${CLAUDE_DIR}/${dir}" -type f -mtime +7 -delete 2>/dev/null
done

# Truncate logs
: > "$CLAUDE_DIR/hooks.log" 2>/dev/null

# Remove Python cache
find "$CLAUDE_DIR" -type d -name "__pycache__" -exec rm -rf {} + 2>/dev/null

# Remove .DS_Store files
find "$CLAUDE_DIR" -name ".DS_Store" -delete 2>/dev/null

echo "Done. Current size:"
du -sh "$CLAUDE_DIR"
