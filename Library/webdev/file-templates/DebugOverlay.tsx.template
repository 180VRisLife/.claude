/**
 * DebugOverlay.tsx
 * {{PROJECT_NAME}}
 *
 * Minimal debug overlay for development builds
 * Auto-generated by /init-workspace
 * Inspired by Apple platform debug overlays
 */

'use client';

import { useState } from 'react';

/**
 * Debug overlay component - only visible in development
 * Shows version, build time, git info, and environment
 */
export function DebugOverlay() {
	const [isExpanded, setIsExpanded] = useState(false);

	// Only render in development
	if (process.env.NODE_ENV !== 'development') {
		return null;
	}

	const version = process.env.NEXT_PUBLIC_APP_VERSION || 'unknown';
	const buildTime = process.env.NEXT_PUBLIC_BUILD_TIME || 'unknown';
	const gitBranch = process.env.NEXT_PUBLIC_GIT_BRANCH || 'unknown';
	const gitHash = process.env.NEXT_PUBLIC_GIT_HASH || 'unknown';
	const envName = process.env.NEXT_PUBLIC_ENV_NAME || 'development';

	const gitInfo = gitBranch !== 'unknown' ? `[${gitBranch}@${gitHash}]` : '[unknown]';

	return (
		<div className="fixed bottom-4 right-4 z-50 font-mono text-xs">
			<div className="flex flex-col items-end gap-2">
				{/* Main debug button */}
				<button
					onClick={() => setIsExpanded(!isExpanded)}
					className="flex items-center gap-2 rounded-lg bg-red-500/85 px-3 py-2 text-white shadow-lg transition-all hover:bg-red-600/85"
				>
					<span className="text-sm font-bold">üêû</span>
					<span className="font-bold">DEBUG</span>
					<span className="opacity-90">v{version}</span>
					<span className="font-medium opacity-80">{gitInfo}</span>
					<span className="text-xs opacity-80">{isExpanded ? '‚ñº' : '‚ñ∂'}</span>
				</button>

				{/* Expanded panel */}
				{isExpanded && (
					<div className="w-64 rounded-lg border border-white/20 bg-black/85 p-3 text-white shadow-xl">
						<div className="space-y-2">
							<div className="flex justify-between">
								<span className="opacity-70">Version:</span>
								<span className="font-semibold">{version}</span>
							</div>
							<div className="flex justify-between">
								<span className="opacity-70">Build:</span>
								<span className="font-semibold text-xs">{buildTime}</span>
							</div>
							<div className="flex justify-between">
								<span className="opacity-70">Git:</span>
								<span className="font-semibold">{gitInfo}</span>
							</div>
							<div className="flex justify-between">
								<span className="opacity-70">Environment:</span>
								<span className="font-semibold text-orange-400">{envName}</span>
							</div>

							<div className="border-t border-white/20 pt-2 mt-2">
								<p className="text-[10px] opacity-60 text-center">
									Add custom debug controls below
								</p>
							</div>

							{/* Add custom debug buttons/controls here */}
							{/* Example:
							<button
								onClick={() => console.log('Debug action')}
								className="w-full rounded bg-purple-500/80 px-2 py-1 text-xs hover:bg-purple-600/80"
							>
								Clear Cache
							</button>
							*/}
						</div>
					</div>
				)}
			</div>
		</div>
	);
}

/**
 * Usage in app/layout.tsx:
 *
 * import { DebugOverlay } from '@/components/DebugOverlay';
 *
 * export default function RootLayout({ children }) {
 *   return (
 *     <html>
 *       <body>
 *         {children}
 *         <DebugOverlay />
 *       </body>
 *     </html>
 *   );
 * }
 */
